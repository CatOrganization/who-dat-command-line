# vim: ai ts=2 sw=2 et sts=2 ft=sh
# vim: autoindent tabstop=2 shiftwidth=2 expandtab softtabstop=2 filetype=sh
source ~/.setup_env 2> /dev/null

setup=${SETUP:-true}

if $setup; then
  source ~/.bash_setup.sh
  if $MAC; then
    brew install thefuck
    brew install git
    brew install bash-git-prompt
    brew install bash-completion
    brew install docker-completion
    brew install docker-compose-completion
    brew install vagrant-completition
  elif $LINUX; then
    # if there is no sudo we dont wanna spook the login
    apt-get install -y \
      bash-completion | 
    sudo apt-get install -y \
      bash-completion

    if [! -f .bash-git-prompt ]; then
      git clone https://github.com/magicmonty/bash-git-prompt.git .bash-git-prompt --depth=1
    fi
    # sh <(curl https://j.mp/spf13-vim3 -L)
    
    
  else
    echo "this is an os we didn't account for $(uname -s)"
  fi
fi

# https://github.com/nvbn/thefuck/
# brew install thefuck
if $MAC; then
  eval $(thefuck --alias)
fi

# https://github.com/magicmonty/bash-git-prompt#via-homebrew-on-mac-os-x
# brew install bash-git-prompt
if $MAC && [ -f "$(brew --prefix)/opt/bash-git-prompt/share/gitprompt.sh" ]; then
  __GIT_PROMPT_DIR=$(brew --prefix)/opt/bash-git-prompt/share
  source "$(brew --prefix)/opt/bash-git-prompt/share/gitprompt.sh"
elif $LINUX;then
  GIT_PROMPT_ONLY_IN_REPO=1
  source ~/.bash-git-prompt/gitprompt.sh
fi

# https://github.com/bobthecow/git-flow-completion/wiki/Install-Bash-git-completion
# brew install git && brew install bash-completion
if $MAC;then
  if [ -f $(brew --prefix)/etc/bash_completion ]; then
    . $(brew --prefix)/etc/bash_completion
  fi
  if [ -f `brew --prefix`/etc/bash_completion.d/vagrant  ]; then
    source `brew --prefix`/etc/bash_completion.d/vagrant
  fi
fi
# elif $LINUX; then
#   source /etc/
# fi

printf "SETUP=false\nexport SETUP\n" > ~/.setup_env
